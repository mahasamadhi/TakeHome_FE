<div class="titleHeader">
  <h1 style="font-size: 28pt;font-family: Arial; font-style: italic;color: #000038">Car Report Generator</h1>

</div>
<div class="container">

  <div id="chooseDataSourceDiv" >
    <div class="inner-container">
      <h2>Choose your datasource</h2>
      <div class="flexRow">
        <select [(ngModel)]="selectedDatasource"  (change)="onSourceChange(this.selectedDatasource)">
          <option value="csv">CSV File</option>
          <option value="h2">Database</option>
          <option value="fs">Server Filesystem</option>
        </select>
        <div *ngIf="selectedDatasource =='h2'" class="button-container" style="margin-bottom: 0px;">
          <button *ngIf="!showSubmitToDb" class="button" (click)="showSubmitToDb = true;">Insert data from CSV</button>
        </div>
        <div *ngIf="selectedDatasource =='h2'" class="button-container" style="margin-bottom: 0px;">
          <button style="width: 100px;" class="button" (click)="deleteAllFromDb()">Delete All from DB</button>

        </div>
      </div>
      <p class="success" *ngIf="deleteSuccess">Data successfully deleted</p>
      <p class="success" *ngIf="uploadSuccess">Data successfully inserted</p>
    </div>
  </div>

  <div *ngIf="selectedDatasource == 'csv' || showSubmitToDb" class="input-file-container" style="margin-bottom: 0px;">
    <input id="fileInput" type="file" (change)="handleFileInput($event)">
  </div>
  <button *ngIf="showSubmitToDb" class="button" (click)="insertCSVToDb()">Submit to Database</button>

  <div class="error-space">
    <span *ngIf="errorMessage" class="error">{{ errorMessage }}</span>
  </div>

  <div style="display: flex;flex-direction: row;justify-content: space-evenly; gap: 15px;">
  <app-group-order
    [isGroupSortActive]="isGroupSortActive"
    (selectedGroupByOptionChange)="handleGroupByOptionChange($event)"
    (selectedSortDirOptionChange)="handleSortDirOptionChange($event)"
    (sortButtonClick)="onSortOrderButtonClick()"
  ></app-group-order>

<app-filter
  [isFilterActive]="isFilterActive"
  [makeOptions]="makeOptions"
  [yearOptions]="yearOptions"
  (filterButtonClick)="onFilterButtonClick()"
  (selectedFilterByOptionChange)="onSelectedFilterByOptionChange($event)"
  (selectedMakeChange)="onSelectedMakeChange($event)"
  (selectedYearChange)="onSelectedYearChange($event)"
  (priceFilterChange)="onPriceFilterChange($event)">>
</app-filter>

  </div>

  <div>
    <button style="background-color: darkgreen" class="button" (click)="submitRequest()"><h1>Submit Request</h1></button>
  </div>

<!--  </div>-->

</div>
